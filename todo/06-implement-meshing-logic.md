# 06: Implement Real Meshing Logic

**Status:** Not Started âšª

This task focuses on replacing the placeholder `meshing.py` with a real implementation that uses the `Gmsh` scripting API to generate a mesh from a STEP file.

## Plan

1.  **Update Dockerfile**:
    - Add `Gmsh` to the list of installed packages in our `Dockerfile`. This will likely involve finding the correct `apt` package or installing it from another source.
2.  **Implement `create_mesh`**:
    - Import the `gmsh` Python module.
    - The `create_mesh` function will:
        - Initialize `gmsh`.
        - Load the `.stp` file generated by the previous stage.
        - Define physical groups for the 'throat', 'mouth', and 'walls' of the horn. This is critical for applying boundary conditions later.
        - Set meshing options, particularly the mesh density, which is a function of the highest frequency to be simulated.
        - Generate the 3D volume mesh.
        - Export the mesh to a `.msh` file compatible with `FEniCSx`.
3.  **Refactor Tests**:
    - As with the geometry stage, we will mock the `gmsh` module for the unit tests (`tests/simulation/test_meshing.py`).
    - The tests will verify the logic, ensuring the correct `gmsh` API calls are made with the right parameters.
4.  **Create Integration Test**:
    - A new integration test will run inside the Docker container.
    - It will call the real `create_mesh` function with a sample STEP file and verify that a valid, non-empty `.msh` file is created. 